
<div class="text-end">
  <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#CrearJornada"><i class="fa-solid fa-plus"></i></button>
</div>

<mat-label>Buscar: </mat-label>
<mat-form-field>
  <input autocomplete="off" class="form-control inputBorderSearch" matInput (keyup)="applyFilter($event)"  #input>
</mat-form-field>

<table mat-table [dataSource]="dataSource" class="table  align-middle table-striped table-hover">
  <ng-container matColumnDef="no">
    <th mat-header-cell *matHeaderCellDef class="text-center"> No </th>
    <td mat-cell *matCellDef="let jornada=index" class="text-center">{{jornada+1}}</td>
  </ng-container>

  <ng-container matColumnDef="nombre">
    <th mat-header-cell *matHeaderCellDef class="text-center"> Jornada </th>
    <td mat-cell *matCellDef="let jornada" class="text-center">{{jornada.jornada}}</td>
  </ng-container>

  <ng-container matColumnDef="acciones">
    <th mat-header-cell *matHeaderCellDef class="text-center"> Acciones </th>
    <td mat-cell *matCellDef="let jornada" class="text-center">
      <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#EditJornadaModal" (click)="buscarJornadasArray(jornada.idJornada)"><i class="fa-solid fa-pen-to-square"></i></button>
        <button class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#EliminarJornadaModal" (click)="buscarJornadasArray(jornada.idJornada)"><i class="fa-solid fa-trash"></i></button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  <!-- Row shown when there is no matching data. -->
  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="4">No se encuentran datos con: "{{input.value}}"</td>
  </tr>
</table>
<mat-paginator [pageSize]="gradosPorPagina" aria-label="Select page of users"></mat-paginator>
<br>
<!--modal Editar-->
<div class="modal fade" id="EditJornadaModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Jornadas</h5>
        <button type="button" #cerrarEditarModal class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
    <form autocomplete="off" [formGroup]="crearJornadaForm" (ngSubmit)="editarJornada(jornadasIndividual.idJornada)">
      <div class="modal-body">
        <div class="form-floating">
          <input type="text" class="form-control" autocomplete="off" formControlName="jornada" [ngClass]="{ 'is-invalid': submitted && f.jornada.errors }"/>
          <label for="floatingName">Nombre de la Jornada</label>
          <span class="text-danger" *ngIf="submitted&&f.jornada.invalid">*** Campo Obligatorio ***</span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cerrar
        </button>
        <button type="submit" class="btn btn-primary"><i class="fa-solid fa-pen-to-square"></i> Editar</button>
      </div>
    </form>
    </div>
  </div>
</div>
<!--CREAR Jonnada Modal-->
<div class="modal fade" id="CrearJornada" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Agregar Jornada</h5>
        <button type="button" #cerrarCrearModal class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form class="row g-3" [formGroup]="crearJornadaForm" (ngSubmit)="crearJornada()">
        <div class="modal-body">
          <div class="col-md-12">
            <div class="mb-3">
              <label for="floatingName">Nombre de la Jornada</label>
              <input type="text" class="form-control" name="jornadaInsert" formControlName="jornada" autocomplete="off" [ngClass]="{ 'is-invalid': submitted && f.jornada.errors }"/>
              <span class="text-danger" *ngIf="submitted&&f.jornada.invalid">*** Campo Obligatorio ***</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="text-center">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="submit" class="btn btn-primary"><i class="fa-solid fa-plus"></i> Crear</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<!--Eliminar Jornada-->
<div class="modal fade" id="EliminarJornadaModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Eliminar Jornada</h5>
        <button type="button" #cerrarEliminarModal class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="alert alert-warning" role="alert">
          Si la jornada esá asignada a un nivel, no será posible eliminarla.
          <b>Esa acción de concretarse no se puede deshacer</b>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-danger" (click)="eliminarJornada(jornadasIndividual.idJornada)"><i class="fa-solid fa-trash-can"></i> Eliminar </button>
      </div>
    </div>
  </div>
</div>
